<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign In | AnGawa</title>

  <!-- CSS -->
  <link rel="stylesheet" href="../styles/main.css">

</head>
<body>
  <section class="container forms">
    <div class="form login">
        <div class="form-content">
            <div class="login-header">Login</div>
            <form id="login-form" action="">
                <div class="field input-field">
                    <input id="email" type="email" placeholder="Email" class="input" required>
                </div>

                <div class="field input-field">
                    <input id="password" type="password" placeholder="Password" class="password" required>
                </div>

                <div class="field button-field">
                    <div class="login-button"><button type="submit">Login</button></div>
                </div>
            </form>

            <div class="form-link">
                <span>Don't have an account? <a href="./signup.html" class="link signup-link">Signup</a></span>
            </div>
        </div>
    </div>
  </section>

  <script>
    let loginForm = document.getElementById("login-form");
    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();

      let email = document.getElementById("email").value;
      let password = document.getElementById("password").value;

      // need bcrypt
      let pw_hash = password;

      async function verifyLogin(email, pw_hash) {
        try {
          const response = await fetch("http://localhost:5000/api/login", {
            method: "POST",
            headers: {
              "Accept": "application/json",
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              "email": email,
              "pw_hash": pw_hash,
            }),
          });

          const result = await response.json();
          return result;

        } catch (error) {
          console.error("Error:", error);
          return null;
        }
      }

      let result = verifyLogin(email, pw_hash);
      console.log(result);
    });
  </script>
</body>
</html>